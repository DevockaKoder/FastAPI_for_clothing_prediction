<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Распознавание цифр и букв на изображениях при помощи сверточной нейронной сети</title>


</head>

            <div class="py-6 justify-center items-center max-w-sm">
                {%if not result%}
                <form action="/" enctype="multipart/form-data" method="post"
                    class="space-y-4 flex flex-col max-w-sm justify-center items-center">


                    <div align="center">
                    <div class="mt-3">
                         <div class="items-center flex flex-shrink-0 justify-center">
                             <table>
                                 <tr><td><span>ИСПОЛЬЗОВАНИЕ FASTAPI ДЛЯ</span></td></tr>
                                 <tr><td>РАБОТЫ С МОДЕЛЬЮ МАШИННОГО ОБУЧЕНИЯ</td></tr>
                                 <tr><td><span></span></td></tr>
                                 <tr><td><span>Выполнено:</span></td></tr>
                                 <tr><td>Сибагатуллиной Л.И, ИВТм-1-22</td></tr>
                             </table>
                         </div>
                        </div>
                    </div>
                    <div align="center">
                    <label id="label" onchange="load(event,'preview-img')"
                        class="w-64 h-48 justify-center flex flex-col items-center px-4 py-6 bg-white rounded-md shadow-md tracking-wide border border-blue cursor-pointer hover:bg-blue-500 hover:text-white text-blue-500 ease-linear transition-all duration-150">
                        <p></p>
                        <span class="mt-2 text-sm">Выбрать изображение</span>

                        <input type='file' class="hidden" name="file" accept="image/*" required />
                    </label>

                    <input type="submit">
                    </div>
                </form>

                {% else %}

                <div class="py-4 space-y-2 flex flex-col items-center">
                    {% if result.image_data %}
                    <div align="center">
                        <p>Результат</p>
                        <img class="h-48 w-auto rounded shadow-sm" src='{{result.image_data}}' alt="{{result.filename}}" />
                    </div>
                    {% endif %}
                    <div align="center">

                        <p class="text-3xl text-gray-600 font-semibold text-center">Это {{ result.predictions.class_name }}</p>
                        <small class="text-gray-600 text-base">Точность {{result.inference_time}}%</small>
                    </div>
 <div align="center">
                    <input onclick="history.back()" class="bg-blue-600 rounded-full px-10 py-2 text-white hover:bg-blue-700 hover:shadow-sm transition-all cursor-pointer" type="reset" />
 </div>
 </div>
                {% endif %}

            </div>

        </div>
    </div>
</body>
<script>
    load = function (event, id) {
        document.getElementById(id).innerHTML = '<span class="text-sm font-medium"><span>';
        var file = event.target.files[0];
        var img = document.createElement('IMG');
        img.className = 'h-48 w-auto rounded shadow-sm'
        img.src = URL.createObjectURL(file);
        document.getElementById(id).appendChild(img);
        var label = document.getElementById("label");
        label.classList.add("hidden");
    };
</script>

</html>

</html>